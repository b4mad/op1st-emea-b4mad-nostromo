---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

commonAnnotations:
  app.kubernetes.io/managed-by: human+kustomize/command-line
  app.kubernetes.io/part-of: op1st-emea-b4mad-nostromo
  org.opencontainers.image.source: https://github.com/goern/op1st-emea-b4mad-nostromo.git

resources:
  - local-volume-discovery.yaml
  - lvm-cluster.yaml
  - github.com/redhat-cop/gitops-catalog/cert-manager-operator/operator/base?ref=main
  - b4mad-cluster-admins.yaml
  - cluster-monitoring-config.yaml
  - cluster-management.yaml
  - nostromo.yaml
  - default-ingress-certificate.yaml
  - op1st-branding.yaml

components:
  - github.com/operate-first/apps/cluster-scope/components/resourcequotas/small?ref=master
  - github.com/operate-first/apps/cluster-scope/components/resourcequotas/medium?ref=master
  - github.com/operate-first/apps/cluster-scope/components/resourcequotas/large?ref=master

patchesStrategicMerge:
# equivalent command: oc patch ingresscontroller.operator default --type=merge -p '{"spec":{"defaultCertificate": {"name": "nostromo-default-ingress-certificate"}}}' -n openshift-ingress-operator
- |-
  apiVersion: operator.openshift.io/v1
  kind: IngressController
  metadata:
    name: default
    namespace: openshift-ingress-operator
  spec:
    defaultCertificate:
      name: default-ingress-certificate
